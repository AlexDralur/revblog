{% extends "base.html" %} {% block content %} {% load crispy_forms_tags %}

<div class="container-fluid">
  <div class="row">
    <div class="col">
      <div class="author-title">
        <p class="author">| {{ post.author.username }}</p>
        <h1 class="post-title">{{ post.title }}</h1>
      </div>
      <div class="post-image">
        {% if "placeholder" in post.featured_image.url %}
        <img src="{{ post.featured_image.url }}" alt="{{ post.title }}" />
        {% else %}
        <img src="{{ post.featured_image.url }}" alt="{{ post.title }}" />
        {% endif %}
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col">
      <div class="post-text">{{ post.content }}</div>
      <div class="row">
        <div class="col-1">
          <i class="fa-regular fa-heart"></i>
        </div>
        <div class="col-1">
          <i class="fa-regular fa-comment"></i> {{ total_comments }}
        </div>
      </div>
    </div>
  </div>
  <div class="post-add">
    <h3>Update:</h3>
    <a
      class="nav-link"
      href="{% url 'update_post' category_slug=post.category.slug post_slug=post.slug %}"
      >Update</a
    >
    <h3>Delete Post</h3>
    <a
      class="nav-link"
      href="{% url 'delete_post' category_slug=post.category.slug post_slug=post.slug %}"
    >
      Delete
    </a>
  </div>
  <div class="cold-md-4 card mb-4 mt-3">
    <div class="card-body">
      {% if user.is_authenticated %}
      <h3>Leave a comment:</h3>
      <p>Posting as: {{ user.username }}</p>
      <form style="margin-top: 1.3em" method="post">
        {{ comment_form | crispy }} {% csrf_token %}
        <button type="submit" class="btn btn-signup btn-lg">Submit</button>
      </form>
      {% endif %}
    </div>
  </div>
</div>

{% endblock %}
